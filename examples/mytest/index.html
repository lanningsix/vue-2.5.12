<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .test-children {
      width: 30px;
    }
  </style>
</head>

<body>
  <div id="el">
    {{selected}}
  </div>
  <script src="../../dist/vue.js"></script>
  <script>
    new Vue({
      el: '#el',
      data: {
        selected: 0,
        options: [
          { id: 1, text: 'Hello' },
          { id: 2, text: 'World' }
        ]
      }
    })
  </script>
  <script>

    fetch('http://activity.61info.cn/static/cms/areaData/countryData.json')

    let xhrss = new XMLHttpRequest()
    xhrss.open('get', 'http://activity.61info.cn/static/cms/areaData/countryData.json')
    xhrss.send()
    // function async1() {
    //   console.log('async1 start'); // 1
    //   const p = async2();
    //   return new Promise((resolve) => {
    //     Promise.resolve().then(() => {
    //       p.then(resolve)
    //     })
    //   })
    //     .then(() => {
    //       console.log('async1 end') // 6
    //     });
    // }

    // function async2() {
    //   console.log('async2'); // 2
    //   return Promise.resolve();
    // }

    // async1();

    // new Promise((resolve) => {
    //   console.log(1) // 3
    //   resolve()
    // }).then(() => {
    //   console.log(2) // 4
    // }).then(() => {
    //   console.log(3) // 5
    // }).then(() => {
    //   console.log(4) // 7
    // })

    // async function async1() {
    //   console.log('async1 start')
    //   // await async2()
    //   // console.log('async1 end')
    //   const p = async2()
    //   return Promise.resolve(p)
    //   .then(() => {
    //     console.log('async1 end')
    //   })
    // }

    // function async2() {
    //   console.log('async2')
    //   return Promise.resolve(Promise.resolve().then(() => {
    //     console.log('444')
    //   }))
    // }

    // console.log('script start')

    // setTimeout(function () {
    //   console.log('setTimeout')
    // }, 0)

    // async1();

    // new Promise(function (resolve) {
    //   console.log('promise1')
    //   resolve()
    // }).then(function () {
    //   console.log('promise2')
    // }).then(function () {
    //   console.log('promise3')
    // }).then(function () {
    //   console.log('promise4')
    // })

    // console.log('script end')
    // const a = [123]
    // const newMethods = Object.create(Array.prototype)
    // const original = Array.prototype.push
    // Object.defineProperty(Array.prototype, 'push', {
    //   value: function mutator(...args) {
    //     console.log('ğŸš€ ~ file: index.html ~ line 31 ~ args', args)
    //     return original.call(this, args)
    //   },
    //   enumerable: false,
    //   writable: true,
    //   configurable: true
    // })

    // let a = function () {
    //   console.log(this)
    //   console.log(this.name)
    // }
    // let b = { name: 'æˆ‘æ˜¯b' }
    // a.bind(b)

    // Object.prototype.bind = function (newObj, ...args) {
    //   const ctx = newObj || window
    //   ctx.fn = this
    //   return function (...argsRemain) {
    //     const result = ctx.fn(...args, ...argsRemain)
    //     delete ctx.fn
    //     return res
    //   }
    // }
    // é¦–å…ˆä»å¯¹è±¡è¯´èµ·ï¼Œvueå°†dataåˆå§‹åŒ–ä¸ºobserver åˆ©ç”¨Object.definePropertyé‡å†™æ¯ä¸ªå¯¹è±¡çš„æ¯ä¸ªå±æ€§çš„get, setæ–¹æ³•ï¼Œæ¯ä¸€ä¸ªkeyéƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ä¾èµ–æ”¶é›†å™¨
    // æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½å¯¹åº”ä¸€ä¸ª watcher å®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠâ€œæ¥è§¦â€è¿‡çš„æ•°æ® property è®°å½•ä¸ºä¾èµ–ã€‚ä¹‹åå½“ä¾èµ–é¡¹çš„ setter è§¦å‘æ—¶ï¼Œåœ¨geté‡Œé¢æ”¶é›†æ¯ä¸€ä¸ªwatcherï¼ˆæ¸²æŸ“watcherï¼Œ è®¡ç®—å±æ€§watcher, ä¾¦å¬å™¨watcherï¼‰ï¼Œå­˜å‚¨åœ¨depä¸­
    // åœ¨setæ›´æ–°çš„æ—¶å€™é€šçŸ¥depï¼Œdepå†é€šçŸ¥æ¯ä¸€ä¸ªwatcherï¼Œä»è€Œè¾¾åˆ°æ›´æ–°
    // å“åº”å¼æ•°ç»„ä¼šé‡å†™å®ƒçš„pushï¼Œslice, popç­‰7ä¸ªæ–¹æ³•, åœ¨è§¦å‘çš„æ—¶å€™ï¼Œæ‹¿åˆ°å½“å‰çš„depï¼Œé€šçŸ¥æ›´æ–°
    
    // åˆ©ç”¨äº†å‘å¸ƒè®¢é˜…çš„è®¾è®¡æ¨¡å¼
    // å½“åˆ›å»º Vue å®ä¾‹æ—¶,vue ä¼šéå† data é€‰é¡¹çš„å±æ€§,åˆ©ç”¨ Object.defineProperty ä¸ºå±æ€§æ·»åŠ  getter å’Œ setter å¯¹æ•°æ®çš„è¯»å–è¿›è¡ŒåŠ«æŒï¼ˆgetter ç”¨æ¥ä¾èµ–æ”¶é›†,setter ç”¨æ¥æ´¾å‘æ›´æ–°ï¼‰ï¼Œ
    // æ¯ä¸ªå±æ€§æœ‰å¯¹åº”çš„depå®ä¾‹ï¼Œåœ¨è¢«è®¿é—®æ—¶ï¼Œä¼šè§¦å‘dataçš„getteræ–¹æ³•ï¼Œæ”¶é›†ä¾èµ–äºæ­¤dataçš„watcheræ”¶é›†åˆ°dep.subsé˜Ÿåˆ—ä¸­
    // ä¹‹åä¾èµ–é¡¹è¢«æ”¹åŠ¨æ—¶,setter æ–¹æ³•ä¼šé€šçŸ¥ä¾èµ–ä¸æ­¤ data çš„ watcher å®ä¾‹é‡æ–°è®¡ç®—ï¼ˆæ´¾å‘æ›´æ–°ï¼‰,ä»è€Œä½¿å®ƒå…³è”çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚
  </script>
</body>

</html>